# Daily Note éƒ¨ç½²æŒ‡å—

## æœ¬åœ°éƒ¨ç½²æ¶æ„

Daily Note é‡‡ç”¨æœ¬åœ°æœåŠ¡æ¶æ„ï¼š
- **å‰ç«¯**: Tauri æ¡Œé¢åº”ç”¨ (Next.js)
- **åç«¯**: Node.js æœåŠ¡ (Fastify + Prisma)
- **é€šä¿¡**: HTTP (localhost:3001)

## å¯åŠ¨æ­¥éª¤

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®‰è£…ï¼š
- Node.js >= 18.0.0
- pnpm >= 8.0.0
- Rust å·¥å…·é“¾ (Tauri éœ€è¦)

### 2. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘ `backend/.env` æ–‡ä»¶ï¼š

```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL="file:./dev.db"

# Claude API é…ç½®
ANTHROPIC_API_KEY="your-api-key-here"

# æœåŠ¡é…ç½®
PORT=3001
CORS_ORIGIN="http://localhost:3000"
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
pnpm db:push
```

### 5. å¯åŠ¨åç«¯æœåŠ¡

**é‡è¦**: å¿…é¡»å…ˆå¯åŠ¨åç«¯æœåŠ¡ï¼ŒTauri åº”ç”¨æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚

```bash
pnpm dev:backend
```

åç«¯å¯åŠ¨æˆåŠŸåï¼Œä¼šæ˜¾ç¤ºï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ“ Daily Note Backend Server                  â•‘
â•‘              Server running on port 3001                   â•‘
â•‘              Health: http://localhost:3001/health           â•‘
â•‘              API Docs: http://localhost:3001/docs            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 6. å¯åŠ¨ Tauri æ¡Œé¢åº”ç”¨

åœ¨ç¡®ä¿åç«¯å·²å¯åŠ¨åï¼Œè¿è¡Œï¼š

```bash
pnpm tauri:dev
```

## å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜1: "åç«¯ç¦»çº¿" æˆ– "åç«¯æœåŠ¡æœªå¯åŠ¨"

**åŸå› **: åç«¯æœåŠ¡ (Fastify) æ²¡æœ‰è¿è¡Œ

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨: è®¿é—® http://localhost:3001/health
2. å¦‚æœæ— æ³•è®¿é—®ï¼Œè¿è¡Œ `pnpm dev:backend` å¯åŠ¨åç«¯
3. æ£€æŸ¥ç«¯å£ 3001 æ˜¯å¦è¢«å ç”¨

### é—®é¢˜2: CSP é”™è¯¯ "Connecting to 'http://ipc.localhost/' violates CSP"

**åŸå› **: Tauri 2.0 çš„ CSP é…ç½®ç¼ºå°‘ IPC æº

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®è®¤ `src-tauri/tauri.conf.json` ä¸­ CSP é…ç½®æ­£ç¡®
- `connect-src` åº”åŒ…å« `ipc: http://ipc.localhost`

### é—®é¢˜3: Claude API é”™è¯¯

**åŸå› **: API Key æœªé…ç½®æˆ–æ— æ•ˆ

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `backend/.env` ä¸­çš„ `ANTHROPIC_API_KEY`
2. é‡å¯åç«¯æœåŠ¡

### é—®é¢˜4: æ•°æ®åº“é”™è¯¯

**åŸå› **: æ•°æ®åº“æœªåˆå§‹åŒ–

**è§£å†³æ–¹æ¡ˆ**:
```bash
pnpm db:push
```

## ç”Ÿäº§æ„å»º

```bash
# æ„å»ºå‰ç«¯
pnpm build:frontend

# æ„å»º Tauri åº”ç”¨
pnpm tauri:build
```

æ„å»ºäº§ç‰©ä½äº `src-tauri/target/release/bundle/`

**æ³¨æ„**: æ‰“åŒ…åçš„åº”ç”¨ä»éœ€è¦åç«¯æœåŠ¡è¿è¡Œæ‰èƒ½æ­£å¸¸å·¥ä½œã€‚
```
